<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  </head>

  <body>
    <header class="jumbotron py-2 sticky-top bg-light">
      <h1 class="display-3"></h1>
      <p id="descript" class="lead small">Work Day Scheduler | Daily Itinerary &amp; Task Planning</p>
      <p id="currentDay" class="lead"></p>
      <div id="hCollapseBtnDiv" class="btn-group dropup">
        <button id="hCollapseBtn" type="button" class="btn btn-secondary dropdown-toggle mb-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        </button></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->
      
    </div>
    <footer>
      <div>&nbsp;</div>
    </footer>

    <script>

      // HEADER CHANGES AND FUNCTIONS

    
      // ---- SHOW DATE IN VARIOUS FORMATS IN THE HEADER ---- //
      // ---------------------------------------------------- //
       // Leverages moment.js to grab today's date and format appropriately (e.g. Mon, 01/31/20) and set it to a var "shortNow"
      let shortNow = moment().format('ddd, MM/DD/YY').toUpperCase();
      // Sets the h1 w/ class "".display-3" with the date in the above variable
      $('.display-3').text(shortNow);

      
      // Set a timer interval to infinitely loop and update the current seconds.
      window.setInterval(function() {
          // Leverages moment.js to grab today's date and format appropriately (e.g. Monday, January 31 2020, 2:32:53 pm) and set it to a var "now"
          let now = moment().format('dddd, MMMM Do YYYY, h:mm:ss a');
          // Sets the p w/ #id "currentDay" with the date held in the above variable
          $('#currentDay').text(now);
          // Loop every the interval every 1000 milliseconds (aka every second)
        }, 1000);
      
      // ---------------------------------------------------- //


      
        



      // ---- CREATE A COLLAPSE HEADER BUTTON AND CLICK FUNCTION ---- //
      // ------------------------------------------------------------ //
      const collapse = 'Collapse '; // Set a variable for the button text when a dropup
      const expand = 'Expand '; // Set a variable for the button text when a dropdown
      $('#hCollapseBtn').text(collapse); // Set the initial button text for the dropup state on page load
      
      // Add an event listener and function to handle collapsing of a portion of the superfluous elements of the header on click
      $('#hCollapseBtn').on('click', function() {
        if ($('#hCollapseBtnDiv').hasClass('dropup')) { // if the div for the button has the .dropup class (indicating a collapsing action)...
          $('#hCollapseBtnDiv').removeClass('dropup'); // ...remove the .dropup class
          $('#hCollapseBtnDiv').addClass('dropdown'); // ...add the .dropdown class
          $('#hCollapseBtn').text(expand); // ...change the button text to be "Expand"
          $('h1').addClass('hidden'); // ...hide the h1
          $('#descript').addClass('hidden'); // ...hide the app description
        } else {
          $('#hCollapseBtnDiv').removeClass('dropdown'); // ...remove the dropdown class
          $('#hCollapseBtnDiv').addClass('dropup'); // ...add the drop-up class
          $('#hCollapseBtn').text(collapse); // ...change the button text to be "Collapse"
          $('.display-3').removeClass('hidden'); // ...show the h1
          $('.lead').removeClass('hidden'); // ...show the app description
        }
      });
      // ------------------------------------------------------------ //

      // ---- CREATE THE TIMEBLOCKS ---- //
      let timeLabel = ["8:00 AM","9:00 AM","10:00 AM", "11:00 AM", "12:00 PM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM", "6:00 PM", "7:00 PM", "8:00 PM", "9:00 PM", "10:00 PM", "11:00 PM", "12:00 AM"]; // create an array of times for the time blocks
      let shortID = ""; // create a variable to hold an ID for each timeblock
      $.each(timeLabel, function(i, val) {  // loop through the timeLabel array, and for each index: value,...
        
        let newTimeBlock = $('<div>').html('<div class="row hourBlock"><div class="col-sm-12 input-group"><div class="input-group-prepend"><span class="input-group-text hourlabel" id="inputGroup-sizing-md">' + val + '</span></div><textarea class="form-control" aria-label="Task" aria-describedby="button-addon2 "></textarea><div class="input-group-append"><button class="btn btn-outline-secondary bg-info" type="button" id="button-addon2"><span class="fas fa-save text-light"></span></button></div></div>'); // create a variable with the row HTML
        if (val.length == 8) { // if the value has an hour that is double-digit (10:00 - 12:00)...
          shortID = val[0]+val[1]+val[val.length-2] // create a short string for the time block's div (e.g. 12A, 10P, etc.)  
        } else {  // if the value has an hour that is single-digit (e.g. 1:00 - 9:00)... 
          shortID = val[0]+val[val.length-2]  // create a short string for the time block's div (e.g. 1A, 9P, etc.)
        };
        newTimeBlock.attr("id", shortID); // add the string to the ID attribute of the new time block
        $('.container').append(newTimeBlock);  // append the timeblock to the container section for the timeblock
      });

      
      // Switches the icon on the hour block button if it has data in it...
      // may use later, may not...

      /* $(".hourBlock").change(function() {
        if ($(this > "textarea").val !== "") {
          console.log(": Has Value");
          $(this).find(".fas").removeClass("fa-save")
          $(this).find(".fas").addClass("fa-edit");
        } else {
          console.log(": Has NO Value");
          $(this).find(".fas").removeClass("fa-edit")
          $(this).find(".fas").addClass("fa-save");
        }
      }); */     

      // if the current time is past the time of the timeblock, set the timeblock to class "alert alert-secondary"

      // if the current time is before the time of the timeblock, set the timeblock to class "alert alert-success"

      // if the current time is within the hour of the timeblock, set the timeblock to class "alert alert-danger"

      // on entry of the textarea, clicking save sets the value for the textarea and saves it to localStorage
      
      // clicking save commits whatever is in the textarea to local storage again / updates localstorage



    </script>

    
  </body>
</html>
